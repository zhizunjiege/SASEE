<!DOCTYPE html>
<html lang="zh_ch">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="/pictures/favicon.ico">
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <style type="text/css">
        html,
        body,
        #container,
        #row {
            height: 100%;
        }
    </style>
    <title>忘记密码</title>
</head>

<body>
    <div class="container" id="container">
        <div class="row align-items-center justify-content-center" id="row">
            <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-4">
                <form action="" id="modifyPW_form" method="POST">
                    <div class="form-group form-row justify-content-around">
                        <p class="col-4 mb-0">身份：</p>
                        <div class="form-check form-check-inline col-4 mr-0">
                            <input type="radio" name="identity" value="0" id="identity-s" class="form-check-input"
                                checked>
                            <label for="identity-s" class="form-check-label">Student</label>
                        </div>
                        <div class="form-check form-check-inline col-4 mr-0">
                            <input type="radio" name="identity" value="1" id="identity-t" class="form-check-input">
                            <label for="identity-t" class="form-check-label">Teacher</label>
                        </div>
                    </div>
                    <div class="form-group form-row">
                        <label class="col-3 col-form-label" for="account">账号：</label>
                        <input class="form-control col-9" type="number" name="account" id="account"
                            placeholder="请输入你的账号" required>
                    </div>
                    <div class="form-group form-row">
                        <label class="col-3 col-form-label" for="pin_code">验证码：</label>
                        <div class="input-group col-9 px-0">
                            <input class="form-control px-1" type="number" name="pin_code" id="pin_code"
                                placeholder="请输入验证码" required>
                            <div class="input-group-append">
                                <button id="send_pin_code" type="button" class="btn btn-outline-primary">发送验证码</button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group form-row">
                        <label for="pw_new" class="col-3 col-form-label">新密码：</label>
                        <input name="newPW" id="pw_new" type="password" class="col-9 form-control" placeholder="请输入新密码"
                            required>
                    </div>
                    <div class="form-group form-row">
                        <label for="pw_repeat" class="col-3 col-form-label">重复密码：</label>
                        <input name="repeatPW" id="pw_repeat" type="password" class="col-9 form-control"
                            placeholder="请重新输入新密码" required>
                    </div>
                    <div class="form-row justify-content-between align-items-center mb-3">
                        <button class="btn btn-secondary w-25" type="reset">重置</button>
                        <button class="btn btn-primary w-25" type="submit">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/bootstrap/others/jquery-3.4.0.js"></script>
    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script>
        (function ($) {
            const SASEE=window.SASEE;
            $('#pin_code_send').click(function () {
                if (this.form.identity && this.form.account) {
                    $.get(SASEE.URL_REQUEST, {
                        type: 'sendPinCode',
                        identity: this.form.identity,
                        account: this.form.account
                    }).done(() => {
                        console.log(this);
                        let count = 60;
                        this.setAttribute('disabled', true);
                        function countDown(target) {
                            if (count) {
                                target.value = String(count--) + 's';
                                setTimeout(() => {
                                    countDown(target);
                                }, 1000);
                            } else {
                                target.value = '发送验证码';
                                target.removeAttribute('disabled')
                            }
                        }
                        countDown(this);
                    });
                } else {
                    alert('请输入身份和账号等信息！');
                }
            });
        })(window.jQuery);
    </script>
</body>

</html>