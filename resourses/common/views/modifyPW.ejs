<div id="modifyPW_modal" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">修改密码</h4>
                <button class="close" data-dismiss="modal"><span>&times;</span></button>
            </div>
            <div class="modal-body">
                <form action="" name="modifyPW" id="modifyPW_form" method="POST" class="text-center">
                    <div class="form-group form-row">
                        <label for="pw_old" class="col-4 col-form-label">旧密码：</label>
                        <input name="oldPW" id="pw_old" type="password" class="col-8 form-control" pattern="\w{8,16}"
                            placeholder="请输入旧密码" required>
                    </div>
                    <div class="form-group form-row">
                        <label for="pw_new" class="col-4 col-form-label">新密码：</label>
                        <input name="newPW" id="pw_new" type="password" class="col-8 form-control" pattern="\w{8,16}"
                            placeholder="请输入新密码" required>
                    </div>
                    <div class="form-group form-row">
                        <label for="pw_repeat" class="col-4 col-form-label">重复密码：</label>
                        <input name="repeatPW" id="pw_repeat" type="password" class="col-8 form-control"
                            pattern="\w{8,16}" placeholder="请重新输入新密码" required>
                    </div>
                    <div class="form-group form-row justify-content-around">
                        <button type="button" class="btn btn-secondary col-3" data-dismiss="modal">取消</button>
                        <button type="submit" class="btn btn-primary col-3">提交</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    (function ($, SASEE) {        
        let $modifyPW_form = $('#modifyPW_form');
        $modifyPW_form.submit((e)=>{
            e.preventDefault();
            if ($modifyPW_form[0].newPW.value == $modifyPW_form[0].repeatPW.value) {
                $modifyPW_form[0].action = SASEE.URL_PW;
                $modifyPW_form[0].submit();
            } else {
                $($modifyPW_form[0].repeatPW).popover({
                    // selector: '#pw_repeat',
                    html: true,
                    content: '<h5 class="text-warning">密码不匹配！</h5>',
                    container: '#modifyPW_modal',
                    placement: 'top'
                }).popover('toggle');
            }
        });
    })(window.jQuery, window.SASEE);
</script>