<!DOCTYPE html>
<html lang="zh_cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" href="/pictures/favicon.ico">
    <link rel="stylesheet" href="/frames/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/system.css">
    <title>登陆</title>
</head>

<body>
    <app-container id="app" class="app-container row align-items-center justify-content-center">
        <div class="col-12 col-sm-8 col-md-6 col-lg-5 col-xl-4">
            <app-form action="/login" :fields="form.fields" :validate="form.validate">
                <template #body="{fields}">
                    <input-account v-model="fields.account"></input-account>
                    <input-password v-model="fields.password"></input-password>
                    <input-radio v-model="fields.identity" name="identity"
                        :radios="[{ val: 'student', des: '学生' }, { val: 'teacher', des: '教师' }]"
                        class=" form-group form-row justify-content-around">
                    </input-radio>
                </template>
                <template #button="{fields}">
                    <div class="form-row justify-content-around align-items-center mb-3">
                        <input-checkbox v-model="fields.save" name="save" :checkboxs="[{ val: 'save', des: '记住密码' }]"
                            class="col-6 col-md-6 mb-3 mb-md-0 ">
                        </input-checkbox>
                        <button class="btn btn-primary col-6 col-md-6 mb-3 mb-md-0" type="submit">登陆</button>
                    </div>
                </template>
            </app-form>
            <div class="row justify-content-between align-items-center mb-3">
                <a href="/register" class="text-center col-6 mb-3 mb-md-0">用户注册</a>
                <a href="/password" class="text-center col-6 mb-3 mb-md-0">找回密码</a>
            </div>
        </div>
    </app-container>

    <script src="/frames/others/jquery-3.4.0.js"></script>
    <script src="/frames/others/object_hash.js"></script>
    <script src="/frames/others/js.cookie.js"></script>
    <script src="/frames/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/frames/vue/vue.js"></script>
    <script src="/js/component.js"></script>
    <script src="/js/util.js"></script>
    <script>
        (function ($, util) {
            let app = new Vue({
                el: '#app',
                data: {
                    form: {
                        fields: {
                            account: Cookies.get('account') || 'aaa',
                            password: Cookies.get('password') || '',
                            identity: Cookies.get('identity') || 'student',
                            save: true/* Cookies.get('saver') == 'user' */
                        },
                        validate: {
                            password(val) {
                                /* {pass,val,msg} */
                                return {
                                    pass: true,
                                    val: objectHash.MD5(val)
                                };
                            }
                        }
                    }
                },
                mixins:[]
            });
        })(Window.jQuery, window.util);
    </script>
</body>

</html>