(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{41:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-container app-scroll row justify-content-center px-0 px-md-3 text-center"},[s("form",{staticClass:"col-8 py-3",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("input-select",{attrs:{label:"所属分组",options:t.groups,required:""},model:{value:t.group.group,callback:function(e){t.$set(t.group,"group",e)},expression:"group.group"}}),t._v(" "),s("input-text",{attrs:{label:"分组序号",type:"number",min:"1",placeholder:"大于0的序号",required:""},model:{value:t.group.num,callback:function(e){t.$set(t.group,"num",e)},expression:"group.num"}}),t._v(" "),s("input-text",{attrs:{label:"分组容量",type:"number",min:"1",placeholder:"大于0的容量",required:""},model:{value:t.group.capacity,callback:function(e){t.$set(t.group,"capacity",e)},expression:"group.capacity"}}),t._v(" "),s("input-text",{attrs:{label:"上课时间",placeholder:"不超过255个字符（或汉字）",maxlength:"255",required:""},model:{value:t.group.time,callback:function(e){t.$set(t.group,"time",e)},expression:"group.time"}}),t._v(" "),s("input-text",{attrs:{label:"上课地点",placeholder:"不超过255个字符（或汉字）",maxlength:"255",required:""},model:{value:t.group.place,callback:function(e){t.$set(t.group,"place",e)},expression:"group.place"}}),t._v(" "),s("input-textarea",{attrs:{label:"分组简介",rows:"8",placeholder:"请填写分组简介,最大1023个字符（或汉字）",maxlength:"1023",required:""},model:{value:t.group.description,callback:function(e){t.$set(t.group,"description",e)},expression:"group.description"}}),t._v(" "),t.teachers.length?s("div",{staticClass:"row mb-5"},[s("label",{staticClass:"col-3 col-form-label required"},[t._v("选择教师")]),t._v(" "),s("input-checkbox",{staticClass:"col-9",attrs:{checkboxs:t.teachers},model:{value:t.group.teachers,callback:function(e){t.$set(t.group,"teachers",e)},expression:"group.teachers"}})],1):t._e(),t._v(" "),t.students.length?s("div",{staticClass:"row mb-5"},[s("label",{staticClass:"col-3 col-form-label required"},[t._v("选择学生")]),t._v(" "),s("input-checkbox",{staticClass:"col-9",attrs:{checkboxs:t.students},model:{value:t.group.students,callback:function(e){t.$set(t.group,"students",e)},expression:"group.students"}})],1):t._e(),t._v(" "),s("div",{staticClass:"form-row justify-content-end align-items-center mb-3"},[s("app-button",{staticClass:"btn btn-primary col-12 col-md-4 mb-3 mb-md-0",attrs:{type:"submit",warn:"您确定提交该分组吗？"}},[s("i",{staticClass:"fa fa-paper-plane"}),t._v("提交\n      ")])],1)],1)])};r._withStripped=!0;var a={data:()=>({group:{},teachers:[],students:[],groups:["1-自动控制与模式识别","2-自主导航与精确制导","3-检测与自动化工程","4-飞行器控制与仿真","5-机电控制与液压","6-电气"],notFirst:!1}),methods:{async submit(){if(this.group.teachers.length){let t=await this.$axiosPost("/kcsj/group-"+(this.$route.query.gid?"edit":"add"),this.group);t.status&&this.$router.push({path:"/kcsj/glfz"}),this.$alertResult(t)}else this.$alertWarn("请选择教师！")}},watch:{"group.group":async function(t,e){let s=null;this.teachers=[],this.students=[];for(const e of["teacher","student"])if(s=await this.$axiosGet("/kcsj/users",{identity:e,group:t}),s.status)for(const t of s.users)this[e+"s"].push({val:t.id,des:t.name});this.notFirst&&(this.group.teachers=[],this.group.students=[]),this.notFirst=!0}},async created(){this.$route.query.gid?this.group=(await this.$axiosGet("/kcsj/group-info",{gid:this.$route.query.gid})).group:this.group={group:"",num:0,capacity:1,time:"",place:"",description:"",teachers:[],students:[]}}},o=s(0),i=Object(o.a)(a,r,[],!1,null,null,null);i.options.__file="modules/kcsj/components/group-form-admin.vue";e.default=i.exports}}]);