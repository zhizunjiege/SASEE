(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{20:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"app-container app-scroll px-0 px-md-3 text-center position-relative"},[a("div",{staticClass:"sticky-top form-group form-row justify-content-around border-bottom border-primary py-3"},[a("app-button",{staticClass:"btn btn-warning",attrs:{type:"button",warn:"您确定要删除所有课题吗？"},nativeOn:{click:function(s){return t.truncate(s)}}},[a("i",{staticClass:"fa fa-trash"}),t._v("删除所有\n    ")]),t._v(" "),a("app-button",{staticClass:"btn btn-primary",attrs:{type:"button"},nativeOn:{click:function(s){return t.submit(s)}}},[a("i",{staticClass:"fa fa-plus"}),t._v("新增课题\n    ")]),t._v(" "),a("app-button",{staticClass:"btn btn-secondary",attrs:{type:"button"},nativeOn:{click:function(s){t.show="stats"}}},[a("i",{staticClass:"fa fa-bar-chart"}),t._v("信息统计\n    ")]),t._v(" "),a("a",{attrs:{href:"/bysj/export-table",download:""}},[a("app-button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[a("i",{staticClass:"fa fa-arrow-down"}),t._v("导出总表\n      ")])],1),t._v(" "),a("div",{staticClass:"input-group col-12 col-md-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"search",placeholder:"输入教师姓名进行搜索...",required:""},domProps:{value:t.name},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.search(s)},input:function(s){s.target.composing||(t.name=s.target.value)}}}),t._v(" "),a("div",{staticClass:"input-group-append"},[a("app-button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},nativeOn:{click:function(s){return t.search(s)}}},[a("i",{staticClass:"fa fa-search"}),t._v("搜索\n        ")])],1)])],1),t._v(" "),"stats"==t.show?[a("table",{staticClass:"table table-hover table-bordered text-center py-3"},[a("caption",{staticClass:"text-center"},[t._v("课题信息统计")]),t._v(" "),t._m(0),t._v(" "),a("tbody",t._l(t.stats,(function(s,e){return a("tr",{key:e},[a("th",{attrs:{scope:"row"}},[t._v(t._s(s.group))]),t._v(" "),a("td",[t._v(t._s(s.students))]),t._v(" "),a("td",[t._v(t._s(s.teachers))]),t._v(" "),a("td",[t._v(t._s(s.uncheck))]),t._v(" "),a("td",[t._v(t._s(s.unpass))]),t._v(" "),a("td",[t._v(t._s(s.pass))]),t._v(" "),a("td",[t._v(t._s(s.uncheck+s.unpass+s.pass))])])})),0)])]:t._e(),t._v(" "),"projects"==t.show?[t.projects.length?t._l(t.projects,(function(s,e){return a("div",{key:e,staticClass:"py-3 border-bottom border-secondary"},[a("header",{staticClass:"mb-3"},[a("h3",{staticClass:"pt-3 mb-0"},[t._v(t._s(s.title))])]),t._v(" "),a("div",{staticClass:"mb-3"},[a("table",{staticClass:"table table-fixed table-bordered"},[a("tbody",[a("tr",[a("th",[t._v("教师姓名")]),t._v(" "),a("td",[t._v(t._s(s.name))]),t._v(" "),a("th",[t._v("审核状态")]),t._v(" "),a("td",[t._v(t._s(s.state))])])])])]),t._v(" "),a("div",{staticClass:"row align-items-between justify-content-around"},[a("app-button",{staticClass:"btn btn-warning col-12 col-md-3 mb-3 mb-md-0",attrs:{type:"button",warn:"您确定删除该课题吗？"},nativeOn:{click:function(s){return t.remove(e)}}},[a("i",{staticClass:"fa fa-trash"}),t._v("删除\n          ")]),t._v(" "),a("app-button",{staticClass:"btn btn-secondary col-12 col-md-3 mb-3 mb-md-0",attrs:{type:"button"},nativeOn:{click:function(s){return t.edit(e)}}},[a("i",{staticClass:"fa fa-pencil"}),t._v("修改\n          ")]),t._v(" "),a("app-button",{staticClass:"btn btn-primary col-12 col-md-3 mb-3 mb-md-0",attrs:{type:"button"},nativeOn:{click:function(s){return t.check(e)}}},[a("i",{staticClass:"fa fa-gavel"}),t._v("审核\n          ")])],1)])})):a("div",{staticClass:"d-flex justify-content-center align-items-center text-muted",staticStyle:{height:"250px"}},[a("h1",[t._v("姓名有误或该老师未发布课题！")])])]:t._e()],2)};e._withStripped=!0;var n={data:()=>({show:"",stats:[],projects:[],name:""}),methods:{async truncate(){this.$alertResult(await this.$axiosGet("/bysj/truncate"))},async search(){if(this.name){let t=await this.$axiosGet("/bysj/search",{name:this.name});t.status?(this.projects=t.projects,this.show="projects"):this.$alertError(t.msg)}},async remove(t){let s=await this.$axiosGet("/bysj/remove",{pid:this.projects[t].id});s.status&&this.projects.splice(t,1),this.$alertResult(s)},submit(){this.$router.push({path:"/bysj/project-form"})},edit(t){this.$router.push({path:"/bysj/project-form",query:{pid:this.projects[t].id}})},check(t){this.$router.push({path:"/bysj/project-content",query:{pid:this.projects[t].id,tid:this.projects[t].teacher,sid:this.projects[t].student}})}},async created(){let t=await this.$axiosGet("/bysj/stats");if(t.status){this.stats=t.stats;let s={students:0,teachers:0,uncheck:0,unpass:0,pass:0};for(const t of this.stats)for(const a of Object.keys(s))s[a]+=t[a]||0;s.group="总计",this.stats.push(s),this.show="stats"}}},r=a(0),i=Object(r.a)(n,e,[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("分组")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("学生人数")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("教师人数")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("未审核课题")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("未通过课题")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("通过课题")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("课题总数")])])])}],!1,null,null,null);i.options.__file="modules/bysj/components/bysj-manage.vue";s.default=i.exports}}]);